<%= jqgrid_stylesheets %>
<%= jqgrid_javascripts %> 

<table>
  <tr class="taleft" width="70%"><td class="taleft">
    <ul class="navigation round taleft">
        <li><%= link_to "Person", people_path %></li>
    </ul>
  </td></tr>
</table>

<h1>Oligo sequences</h1>
<%= link_to 'New oligo sequence', new_oligo_sequence_path %>
<br />	
<%= link_to 'Export selected oligos as Excel file', 'oligo_sequences.xls' %>
<br />	

<button type='submit' onclick='x(); return false;'>load selected</button>
<script type="text/javascript" >
	function x() {
var listchk = $("input:checked"); 
alert ('listchk: ' + listchk.length)

}
//jQuery('#ngbgrid').editRow(id, true, formatEditors);

  function handleSelection(id) {
        <%= remote_function (:url => {:controller=> 'oligo_sequences',
                 :action => 'show'},
                 :with => "id= " + String(id))
        %>
    }
 function grdloaded(){
        //alert('Loaded')
    }
 function formatEditors(id) {
        // Your drop down code here...
        // EG: jQuery("#"+id+"_myDropDownRow","#mygrid").
    }

//use, :selection_handler => "handleSelection", :direct_selection => true
//use, :grid_complete => "grid_complete" 


</script>

    
<%= jqgrid("List of oligo sequences: you can filter (using the lens icon in the bottom of the grid), sort (clicking on the header column), scroll the data in the grid (using the pagination system)", "ngbgrid", oligo_sequences_path,
	[
		{ :field => "id", :label => "ID", :width => 25, :resizable => false, :sortable => false, :editable => false, :hidden => true},
        { :field => "act", :label => "Details", :width => 25, :align => 'center', :resizable => true, :sortable => false, :search => false },
	{ :field => "code", :label => "Partner code", :width => 100, :search => true, :sortable => true  },
		{ :field => "verbose_me", :label => "Description", :search => true, :width => 140, :sortable => true  },
		{ :field => "dna_ellipsis", :label => "DNA sequence", :width => 200, :search => true, :sortable => true  },
      { :field => "partner_name", :label => "Partner", :sortable => true, :width => 70, :search => true, :searchtype => "select", :searchoptions => { :data => [Partner.all, :id, :code] }, :edittype => 'select', :editable => true, :editoptions => { :data => [Partner.all, :id, :code] } },
		
      { :field => "people_name", :label => "Person", :search => false, :sortable => false, :editable => false, :width => 100 },
      { :field => "taxonomy_name", :label => "Taxonomy name", :search => true, :width => 100, :sortable => true  },
      { :field => "taxonomy_id", :label => "TaxID", :search => true, :width => 50, :sortable => true  },

      { :field => "available", :label => "Select Oligos", :width => 25 , :resizable => true, :sortable => false, :search => false, :formatter => 'checkbox', :formatoptions => { :disabled => false }, :searchoptions => { :value => "Yes:No" } , :editable => true, :edittype => 'checkbox', :editoptions => { :value => "No" }, :align => 'center'  },	

		{ :field => "edit_link", :label => "edit", :search => false, :sortable => false, :width => 25, :align => 'center', :resizable => false}
	], 
    {   :add => false, 
        :excel => true,
        :edit => false, 
        :inline_edit => false, 
        :delete => true, 
        :rows_per_page => "50", 
        :height => 800, 
        :rownumbers => 'false',
        :grid_loaded => 'grdloaded',
        :multiselect => 'true',
        :subgrid=> { 
                :url => experiments_path,
                :rows_per_page => 40,
                :sort_column => 'microarraygal_id',
                :sort_order => 'asc',
                :search => 'false',
                :rownumbers => 'false',
                :columns => [
		            { :field => "id", :label => "ID", :width => 50, :resizable => false, :sortable => false, :editable => false, :hidden => true},
        { :field => "act", :label => "", :width => 30 , :resizable => false, :sortable => false, :search => false, :resizable => true },
        { :field => "exp_code", :label => "Microarray exp. code", :search => true, :width => 130, :sortable => true, :resizable => true },
        { :field => "gal_code", :label => "GAL code", :search => true, :sortable => true, :editable => false, :width => 250, :resizable => true },
        { :field => "exp_date", :label => "Exp. date", :search => true, :sortable => true, :editable => false, :width => 100, :resizable => true },
	{ :field => "edit", :label => "Edit", :search => false, :sortable => false, :width => 50 , :resizable => true}
]}

}) %>

<br />
<%= link_to 'New oligo_sequence', new_oligo_sequence_path %>
<br />	
<%= link_to 'Export selected oligos as Excel file', 'oligo_sequences.xls' %>



